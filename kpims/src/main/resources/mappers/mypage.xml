<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mypage">

	<insert id="insertCart" parameterType="MypageDTO">
		INSERT INTO
			CART (SHOP_CD,
				  CART_SHOP_QTY,
				  MEMBER_ID,
				  SHIPPING_INFO
		)
		VALUES (
				#{shopCd},
				#{cartGoodsQty},
				#{memberId},
				#{shippingInfo}
		)
	</insert>
	
	<select id="selectListMyCart" parameterType="String" resultMap="cartMap">
		SELECT
				C.CART_CD	  	   AS CART_CD,
				C.MEMBER_ID        AS MEMBER_ID,
				C.CART_SHOP_QTY    AS CART_SHOP_QTY,
				C.SHIPPING_INFO	   AS SHIPPING_INFO,
				S.SHOP_CD  	   	   AS SHOP_CD,
				S.SHOP_NM		   AS SHOP_NM,
				S.PRICE    		   AS PRICE,
				S.DISCOUNT_RATE    AS DISCOUNT_RATE,
				S.POINT			   AS POINT,
				S.GOODS_SHOP_NAME  AS GOODS_SHOP_NAME
		FROM
				CART C
		   JOIN SHOP S
		  		  ON C.GOODS_CD = S.GOODS_CD			
		WHERE
				C.MEMBER_ID = #{memberId}
		ORDER BY
				C.ENROLL_DT DESC
	</select>


</mapper>